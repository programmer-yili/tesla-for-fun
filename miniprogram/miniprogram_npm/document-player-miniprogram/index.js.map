{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.ts","webpack:///./src/aes-decrypter.js"],"names":["f","exports","module","define","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","precompute","tables","encTable","decTable","sbox","sboxInv","undefined","x","xInv","d","th","x2","x4","x8","tEnc","tDec","slice","aesTables","AES","_tables","j","tmp","encKey","decKey","keyLen","rcon","_key","decrypt","encrypted0","encrypted1","encrypted2","encrypted3","out","offset","b","c","a2","b2","c2","nInnerRounds","kIndex","table","table0","table1","table2","table3","_get","get","_x","_x2","_x3","_again","_function","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_interopRequireDefault","obj","__esModule","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_stream","_stream2","AsyncStream","_Stream","jobs","delay","timeout_","processJob_","shift","setTimeout","bind","push","job","_globalWindow","_globalWindow2","_aes","_aes2","_asyncStream","_asyncStream2","_pkcs7","ntoh","word","decryptNonNative","encrypted","initVector","encrypted32","Int32Array","buffer","byteOffset","byteLength","decipher","Array","decrypted","Uint8Array","decrypted32","init0","init1","init2","init3","wordIx","Decrypter","done","view","DataView","littleEndianKey","Uint32Array","getUint32","step","STEP","asyncStream_","decryptChunk_","subarray","unpad","bytes","set","getWebCrypto","msCrypto","_crypto","crypto","webkitSubtle","subtle","decryptWithWebCrypto","iv","algorithm","name","extractable","usages","keyPromise","importKey","then","importedKey","rejection","plaintextArrayBuffer","decryptWithDecrypter","decryptionMethod","Stream","listeners","on","type","listener","off","index","indexOf","splice","trigger","callbacks","args","arguments","apply","dispose","pipe","destination","data","global","window","self","PADDING","pad","plaintext","padding","result","padded","_decrypter"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","// eslint-disable-next-line import/extensions\nimport {Decrypter} from './aes-decrypter.js'\n\nimport {ContentPosition, ImgItem} from './types'\n\nComponent({\n  properties: {\n    imageUrlPrefix: {\n      type: String\n    },\n    totalPage: {\n      type: Number\n    },\n    encryptKey: {\n      type: String\n    },\n    encryptIv: {\n      type: String\n    },\n    startPage: {\n      type: Number\n    },\n    defaultPosition: {\n      type: Object,\n    },\n    imageData: {\n      type: Array,\n      observer: '__contentValue'\n\n    },\n    playPages: {\n      type: Array,\n      observer: '__playPagesContent'\n    },\n    toc: {\n      type: Array\n    }\n  },\n  data: {\n    position: {\n      page: 0\n    } as ContentPosition,\n    imageList: [] as Array<ImgItem>,\n    isFullscreen: false,\n    isEncrypted: true,\n    width: 0,\n    height: 0,\n    toc: [],\n    showToc: false\n  },\n  lifetimes: {\n    attached() {\n      this._init()\n      this.resize()\n    }\n  },\n  methods: {\n    __playPagesContent(newValue) {\n      if (newValue) {\n        this._init()\n        this.resize()\n      }\n    },\n    __contentValue(newValue) {\n      if (newValue) {\n        this._init()\n        this.resize()\n      }\n    },\n    handlePage(e) {\n      this.goto({page: e.currentTarget.dataset.page})\n    },\n    reBuildToc() {\n      const list = []\n      const toc = this.properties.toc\n      toc.forEach(item => {\n        list.push({title: item.title, key: item.key, type: 'part'})\n        if (item.children.length) {\n          item.children.forEach(item2 => {\n            list.push({title: item2.title, key: item2.key, type: 'chapter'})\n            if (item2.children.length) {\n              item2.children.forEach(item3 => {\n                list.push({title: item3.title, key: item3.key, type: 'unit'})\n              })\n            }\n          })\n        }\n      })\n      this.setData({\n        toc: list\n      })\n    },\n    toggleToc() {\n      this.setData({\n        showToc: !this.data.showToc\n      })\n    },\n    resize() {\n      const that = this\n      const query = this.createSelectorQuery()\n      query.select('.pages').boundingClientRect()\n      query.exec(function (res) {\n        that.setData({\n          width: res[0].width,\n          height: res[0].height\n        })\n      })\n    },\n    _init() {\n      if (this.properties.imageData.length) {\n        this._initNoEncryptData()\n      } else {\n        this._initEncryptData()\n      }\n      if (this.properties.defaultPosition) {\n        this.goto(this.properties.defaultPosition)\n      } else {\n        this.goto({page: 1})\n      }\n      if (this.properties.toc.length) {\n        this.reBuildToc()\n      }\n    },\n    onFullScreen() {\n      const status = !this.data.isFullscreen\n      this.triggerEvent('fullscreen-change', {status})\n      this.setData({\n        isFullscreen: status\n      })\n      this.resize()\n    },\n    _initEncryptData() {\n      const list = []\n      if (this.properties.playPages.length) {\n        this.properties.playPages.forEach((item, index) => {\n          const img = {\n            src: this.properties.imageUrlPrefix + item,\n            page: (index + 1),\n            active: false,\n            load: false\n          } as ImgItem\n          list.push(img)\n        })\n      } else {\n        for (let i = 1; i <= this.properties.totalPage; i++) {\n          const img = {\n            src: this.properties.imageUrlPrefix + i,\n            page: i,\n            active: false,\n            load: false\n          } as ImgItem\n          list.push(img)\n        }\n      }\n\n      this.setData({\n        imageList: list,\n        isEncrypted: true\n      })\n    },\n    _initNoEncryptData() {\n      const list = []\n      for (let i = 0; i < this.properties.imageData.length; i++) {\n        const img = {\n          src: this.properties.imageData[i],\n          page: (i + 1),\n          active: false,\n          load: false\n        } as ImgItem\n        list.push(img)\n      }\n      this.setData({\n        imageList: list,\n        isEncrypted: false\n      })\n    },\n    _str2uint32(str: string) {\n      const l = str.length\n      const array = new Uint8Array(l)\n      for (let i = 0; i < l; i++) {\n        array[i] = str[i].charCodeAt(0)\n      }\n      return new Uint32Array(array.buffer)\n    },\n    _loadImage(image) {\n      let data\n      const that = this\n      wx.request({\n        url: image.src,\n        responseType: 'arraybuffer',\n        success: result => {\n          data = result.data\n          if (that.data.isEncrypted) {\n            const key = that._str2uint32(this.properties.encryptKey)\n            const iv = that._str2uint32(this.properties.encryptIv)\n            const readerBuffer = new Uint8Array(data)\n            // eslint-disable-next-line handle-callback-err,no-new\n            new Decrypter(readerBuffer, key, iv, (err, decryptedArray) => {\n              image.base64 = 'data:image/png;base64,' + wx.arrayBufferToBase64(decryptedArray.buffer)\n              image.load = true\n              const currentIndex = image.page - 1\n              that.setData({\n                ['imageList[' + currentIndex + ']']: image,\n              })\n            })\n          } else {\n            image.base64 = 'data:image/png;base64,' + wx.arrayBufferToBase64(data)\n            image.load = true\n            const currentIndex = image.page - 1\n            that.setData({\n              ['imageList[' + currentIndex + ']']: image,\n            })\n          }\n        }\n      })\n    },\n    prev() {\n      this.goto({page: this.data.position.page - 1})\n    },\n\n    next() {\n      this.goto({page: this.data.position.page + 1})\n    },\n    goFirst() {\n      this.goto({page: 1})\n    },\n    goLast() {\n      this.goto({page: this.data.totalPage})\n    },\n    goto(position: ContentPosition) {\n      let page = position.page\n      if (page < 1) {\n        page = 1\n      }\n      if (page > this.data.imageList.length) {\n        page = this.data.imageList.length\n      }\n\n      if (this.data.position.page === page && page !== 1) {\n        return\n      }\n\n      this.setData({\n        position: {page}\n      })\n      this.triggerEvent('page-change', {page})\n      let oldActiveImg: ImgItem | undefined\n      let newActiveImg: ImgItem | undefined\n\n      for (const img of this.data.imageList) {\n        if (img.active) {\n          oldActiveImg = img\n        }\n\n        if (img.page === page) {\n          newActiveImg = img\n        }\n      }\n\n      if (oldActiveImg && newActiveImg && oldActiveImg.page === newActiveImg.page) {\n        return\n      }\n\n      if (oldActiveImg) {\n        oldActiveImg.active = false\n        const currentIndex = oldActiveImg.page - 1\n        this.setData({\n          ['imageList[' + currentIndex + ']']: oldActiveImg,\n        })\n      }\n\n\n      if (newActiveImg) {\n        newActiveImg.active = true\n        const currentIndex = newActiveImg.page - 1\n        this.setData({\n          ['imageList[' + currentIndex + ']']: newActiveImg\n        })\n        if (!newActiveImg.load) {\n          this._loadImage(newActiveImg)\n        }\n      }\n    }\n  }\n})\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.aesDecrypter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * @file aes.js\n *\n * This file contains an adaptation of the AES decryption algorithm\n * from the Standford Javascript Cryptography Library. That work is\n * covered by the following copyright and permissions notice:\n *\n * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR\n * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN\n * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation\n * are those of the authors and should not be interpreted as representing\n * official policies, either expressed or implied, of the authors.\n */\n\n/**\n * Expand the S-box tables.\n *\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar precompute = function precompute() {\n  var tables = [[[], [], [], [], []], [[], [], [], [], []]];\n  var encTable = tables[0];\n  var decTable = tables[1];\n  var sbox = encTable[4];\n  var sboxInv = decTable[4];\n  var i = undefined;\n  var x = undefined;\n  var xInv = undefined;\n  var d = [];\n  var th = [];\n  var x2 = undefined;\n  var x4 = undefined;\n  var x8 = undefined;\n  var s = undefined;\n  var tEnc = undefined;\n  var tDec = undefined;\n\n  // Compute double and third tables\n  for (i = 0; i < 256; i++) {\n    th[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\n  }\n\n  for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\n    // Compute sbox\n    s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n    s = s >> 8 ^ s & 255 ^ 99;\n    sbox[x] = s;\n    sboxInv[s] = x;\n\n    // Compute MixColumns\n    x8 = d[x4 = d[x2 = d[x]]];\n    tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n    tEnc = d[s] * 0x101 ^ s * 0x1010100;\n\n    for (i = 0; i < 4; i++) {\n      encTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n      decTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\n    }\n  }\n\n  // Compactify. Considerable speedup on Firefox.\n  for (i = 0; i < 5; i++) {\n    encTable[i] = encTable[i].slice(0);\n    decTable[i] = decTable[i].slice(0);\n  }\n  return tables;\n};\nvar aesTables = null;\n\n/**\n * Schedule out an AES key for both encryption and decryption. This\n * is a low-level class. Use a cipher mode to do bulk encryption.\n *\n * @class AES\n * @param key {Array} The key as an array of 4, 6 or 8 words.\n */\n\nvar AES = (function () {\n  function AES(key) {\n    _classCallCheck(this, AES);\n\n    /**\n     * The expanded S-box and inverse S-box tables. These will be computed\n     * on the client so that we don't have to send them down the wire.\n     *\n     * There are two tables, _tables[0] is for encryption and\n     * _tables[1] is for decryption.\n     *\n     * The first 4 sub-tables are the expanded S-box with MixColumns. The\n     * last (_tables[01][4]) is the S-box itself.\n     *\n     * @private\n     */\n    // if we have yet to precompute the S-box tables\n    // do so now\n    if (!aesTables) {\n      aesTables = precompute();\n    }\n    // then make a copy of that object for use\n    this._tables = [[aesTables[0][0].slice(), aesTables[0][1].slice(), aesTables[0][2].slice(), aesTables[0][3].slice(), aesTables[0][4].slice()], [aesTables[1][0].slice(), aesTables[1][1].slice(), aesTables[1][2].slice(), aesTables[1][3].slice(), aesTables[1][4].slice()]];\n    var i = undefined;\n    var j = undefined;\n    var tmp = undefined;\n    var encKey = undefined;\n    var decKey = undefined;\n    var sbox = this._tables[0][4];\n    var decTable = this._tables[1];\n    var keyLen = key.length;\n    var rcon = 1;\n\n    if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\n      throw new Error('Invalid aes key size');\n    }\n\n    encKey = key.slice(0);\n    decKey = [];\n    this._key = [encKey, decKey];\n\n    // schedule encryption keys\n    for (i = keyLen; i < 4 * keyLen + 28; i++) {\n      tmp = encKey[i - 1];\n\n      // apply sbox\n      if (i % keyLen === 0 || keyLen === 8 && i % keyLen === 4) {\n        tmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255];\n\n        // shift rows and add rcon\n        if (i % keyLen === 0) {\n          tmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\n          rcon = rcon << 1 ^ (rcon >> 7) * 283;\n        }\n      }\n\n      encKey[i] = encKey[i - keyLen] ^ tmp;\n    }\n\n    // schedule decryption keys\n    for (j = 0; i; j++, i--) {\n      tmp = encKey[j & 3 ? i : i - 4];\n      if (i <= 4 || j < 4) {\n        decKey[j] = tmp;\n      } else {\n        decKey[j] = decTable[0][sbox[tmp >>> 24]] ^ decTable[1][sbox[tmp >> 16 & 255]] ^ decTable[2][sbox[tmp >> 8 & 255]] ^ decTable[3][sbox[tmp & 255]];\n      }\n    }\n  }\n\n  /**\n   * Decrypt 16 bytes, specified as four 32-bit words.\n   *\n   * @param {Number} encrypted0 the first word to decrypt\n   * @param {Number} encrypted1 the second word to decrypt\n   * @param {Number} encrypted2 the third word to decrypt\n   * @param {Number} encrypted3 the fourth word to decrypt\n   * @param {Int32Array} out the array to write the decrypted words\n   * into\n   * @param {Number} offset the offset into the output array to start\n   * writing results\n   * @return {Array} The plaintext.\n   */\n\n  _createClass(AES, [{\n    key: 'decrypt',\n    value: function decrypt(encrypted0, encrypted1, encrypted2, encrypted3, out, offset) {\n      var key = this._key[1];\n      // state variables a,b,c,d are loaded with pre-whitened data\n      var a = encrypted0 ^ key[0];\n      var b = encrypted3 ^ key[1];\n      var c = encrypted2 ^ key[2];\n      var d = encrypted1 ^ key[3];\n      var a2 = undefined;\n      var b2 = undefined;\n      var c2 = undefined;\n\n      // key.length === 2 ?\n      var nInnerRounds = key.length / 4 - 2;\n      var i = undefined;\n      var kIndex = 4;\n      var table = this._tables[1];\n\n      // load up the tables\n      var table0 = table[0];\n      var table1 = table[1];\n      var table2 = table[2];\n      var table3 = table[3];\n      var sbox = table[4];\n\n      // Inner rounds. Cribbed from OpenSSL.\n      for (i = 0; i < nInnerRounds; i++) {\n        a2 = table0[a >>> 24] ^ table1[b >> 16 & 255] ^ table2[c >> 8 & 255] ^ table3[d & 255] ^ key[kIndex];\n        b2 = table0[b >>> 24] ^ table1[c >> 16 & 255] ^ table2[d >> 8 & 255] ^ table3[a & 255] ^ key[kIndex + 1];\n        c2 = table0[c >>> 24] ^ table1[d >> 16 & 255] ^ table2[a >> 8 & 255] ^ table3[b & 255] ^ key[kIndex + 2];\n        d = table0[d >>> 24] ^ table1[a >> 16 & 255] ^ table2[b >> 8 & 255] ^ table3[c & 255] ^ key[kIndex + 3];\n        kIndex += 4;\n        a = a2;b = b2;c = c2;\n      }\n\n      // Last round.\n      for (i = 0; i < 4; i++) {\n        out[(3 & -i) + offset] = sbox[a >>> 24] << 24 ^ sbox[b >> 16 & 255] << 16 ^ sbox[c >> 8 & 255] << 8 ^ sbox[d & 255] ^ key[kIndex++];\n        a2 = a;a = b;b = c;c = d;d = a2;\n      }\n    }\n  }]);\n\n  return AES;\n})();\n\nexports['default'] = AES;\nmodule.exports = exports['default'];\n},{}],2:[function(require,module,exports){\n/**\n * @file async-stream.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('./stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\n/**\n * A wrapper around the Stream class to use setTiemout\n * and run stream \"jobs\" Asynchronously\n *\n * @class AsyncStream\n * @extends Stream\n */\n\nvar AsyncStream = (function (_Stream) {\n  _inherits(AsyncStream, _Stream);\n\n  function AsyncStream() {\n    _classCallCheck(this, AsyncStream);\n\n    _get(Object.getPrototypeOf(AsyncStream.prototype), 'constructor', this).call(this, _stream2['default']);\n    this.jobs = [];\n    this.delay = 1;\n    this.timeout_ = null;\n  }\n\n  /**\n   * process an async job\n   *\n   * @private\n   */\n\n  _createClass(AsyncStream, [{\n    key: 'processJob_',\n    value: function processJob_() {\n      this.jobs.shift()();\n      if (this.jobs.length) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      } else {\n        this.timeout_ = null;\n      }\n    }\n\n    /**\n     * push a job into the stream\n     *\n     * @param {Function} job the job to push into the stream\n     */\n  }, {\n    key: 'push',\n    value: function push(job) {\n      this.jobs.push(job);\n      if (!this.timeout_) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      }\n    }\n  }]);\n\n  return AsyncStream;\n})(_stream2['default']);\n\nexports['default'] = AsyncStream;\nmodule.exports = exports['default'];\n},{\"./stream\":4}],3:[function(require,module,exports){\n/**\n * @file decrypter.js\n *\n * An asynchronous implementation of AES-128 CBC decryption with\n * PKCS#7 padding.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _aes = require('./aes');\n\nvar _aes2 = _interopRequireDefault(_aes);\n\nvar _asyncStream = require('./async-stream');\n\nvar _asyncStream2 = _interopRequireDefault(_asyncStream);\n\nvar _pkcs7 = require('pkcs7');\n\n/**\n * Convert network-order (big-endian) bytes into their little-endian\n * representation.\n */\nvar ntoh = function ntoh(word) {\n  return word << 24 | (word & 0xff00) << 8 | (word & 0xff0000) >> 8 | word >>> 24;\n};\n\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n *\n * @param {Uint32Array}  encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * use for the first round of CBC.\n * @return {Uint8Array} the decrypted bytes\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\nvar decryptNonNative = function decryptNonNative(encrypted, key, initVector) {\n  // word-level access to the encrypted bytes\n  var encrypted32 = new Int32Array(encrypted.buffer, encrypted.byteOffset, encrypted.byteLength >> 2);\n\n  var decipher = new _aes2['default'](Array.prototype.slice.call(key));\n\n  // byte and word-level access for the decrypted output\n  var decrypted = new Uint8Array(encrypted.byteLength);\n  var decrypted32 = new Int32Array(decrypted.buffer);\n\n  // temporary variables for working with the IV, encrypted, and\n  // decrypted data\n  var init0 = undefined;\n  var init1 = undefined;\n  var init2 = undefined;\n  var init3 = undefined;\n  var encrypted0 = undefined;\n  var encrypted1 = undefined;\n  var encrypted2 = undefined;\n  var encrypted3 = undefined;\n\n  // iteration variable\n  var wordIx = undefined;\n\n  // pull out the words of the IV to ensure we don't modify the\n  // passed-in reference and easier access\n  init0 = initVector[0];\n  init1 = initVector[1];\n  init2 = initVector[2];\n  init3 = initVector[3];\n\n  // decrypt four word sequences, applying cipher-block chaining (CBC)\n  // to each decrypted block\n  for (wordIx = 0; wordIx < encrypted32.length; wordIx += 4) {\n    // convert big-endian (network order) words into little-endian\n    // (javascript order)\n    encrypted0 = ntoh(encrypted32[wordIx]);\n    encrypted1 = ntoh(encrypted32[wordIx + 1]);\n    encrypted2 = ntoh(encrypted32[wordIx + 2]);\n    encrypted3 = ntoh(encrypted32[wordIx + 3]);\n\n    // decrypt the block\n    decipher.decrypt(encrypted0, encrypted1, encrypted2, encrypted3, decrypted32, wordIx);\n\n    // XOR with the IV, and restore network byte-order to obtain the\n    // plaintext\n    decrypted32[wordIx] = ntoh(decrypted32[wordIx] ^ init0);\n    decrypted32[wordIx + 1] = ntoh(decrypted32[wordIx + 1] ^ init1);\n    decrypted32[wordIx + 2] = ntoh(decrypted32[wordIx + 2] ^ init2);\n    decrypted32[wordIx + 3] = ntoh(decrypted32[wordIx + 3] ^ init3);\n\n    // setup the IV for the next round\n    init0 = encrypted0;\n    init1 = encrypted1;\n    init2 = encrypted2;\n    init3 = encrypted3;\n  }\n\n  return decrypted;\n};\n\n/**\n * The `Decrypter` class that manages decryption of AES\n * data through `AsyncStream` objects and the `decrypt`\n * function\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint8Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * @param {Function} done the function to run when done\n * @class Decrypter\n */\n\nvar Decrypter = (function () {\n  function Decrypter(encrypted, key, initVector, done) {\n    _classCallCheck(this, Decrypter);\n\n    var view = new DataView(key.buffer);\n    var littleEndianKey = new Uint32Array([view.getUint32(0), view.getUint32(4), view.getUint32(8), view.getUint32(12)]);\n    var step = Decrypter.STEP;\n    var encrypted32 = new Int32Array(encrypted.buffer);\n    var decrypted = new Uint8Array(encrypted.byteLength);\n    var i = 0;\n\n    this.asyncStream_ = new _asyncStream2['default']();\n\n    // split up the encryption job and do the individual chunks asynchronously\n    this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), littleEndianKey, initVector, decrypted));\n    for (i = step; i < encrypted32.length; i += step) {\n      initVector = new Uint32Array([ntoh(encrypted32[i - 4]), ntoh(encrypted32[i - 3]), ntoh(encrypted32[i - 2]), ntoh(encrypted32[i - 1])]);\n      this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), littleEndianKey, initVector, decrypted));\n    }\n    // invoke the done() callback when everything is finished\n    this.asyncStream_.push(function () {\n      // remove pkcs#7 padding from the decrypted bytes\n      done(null, (0, _pkcs7.unpad)(decrypted));\n    });\n  }\n\n  /**\n   * Get a consistent crypto.subtle across various browsers.\n   *\n   * @return {WebCrypto Object}\n   */\n\n  /**\n   * a getter for step the maximum number of bytes to process at one time\n   *\n   * @return {Number} the value of step 32000\n   */\n\n  _createClass(Decrypter, [{\n    key: 'decryptChunk_',\n\n    /**\n     * @private\n     */\n    value: function decryptChunk_(encrypted, key, initVector, decrypted) {\n      return function () {\n        // decryptNonNative must be a separate function (not a method or\n        // static method on Decrypter) else IE10 will crash.\n        var bytes = decryptNonNative(encrypted, key, initVector);\n\n        decrypted.set(bytes, encrypted.byteOffset);\n      };\n    }\n  }], [{\n    key: 'STEP',\n    get: function get() {\n      // 4 * 8000;\n      return 32000;\n    }\n  }]);\n\n  return Decrypter;\n})();\n\nexports.Decrypter = Decrypter;\nvar getWebCrypto = function getWebCrypto() {\n  // IE11 uses this prefix, but with an out of date version of the\n  // spec that doesn't use Promises, and doesn't have native Promises\n  // either, thus we fall back to the non-native decryption. Edge is\n  // up to spec.\n  if (_globalWindow2['default'].msCrypto) {\n    return null;\n  }\n\n  var _crypto = _globalWindow2['default'].crypto;\n\n  if (!_crypto) {\n    return null;\n  }\n\n  // We shouldn't need to worry about Safari (which does HLSe\n  // natively) but we use this for completeness.\n  if (_crypto.webkitSubtle) {\n    _crypto.subtle = _crypto.webkitSubtle;\n  }\n\n  return _crypto.subtle ? _crypto : null;\n};\n\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint8Array} key the bytes of the decryption key\n * @param {Uint32Array} iv the initialization vector (IV) to\n * use for the first round of CBC.\n * @param {Function} done callback that takes a Uint8Array\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\nvar decryptWithWebCrypto = function decryptWithWebCrypto(encrypted, key, iv, done) {\n  var crypto = getWebCrypto();\n  var algorithm = { name: 'AES-CBC', iv: iv };\n  var extractable = true;\n  var usages = ['decrypt'];\n\n  var keyPromise = crypto.subtle.importKey('raw', key, algorithm, extractable, usages);\n\n  return keyPromise.then(function (importedKey) {\n    return crypto.subtle.decrypt(algorithm, importedKey, encrypted);\n  })['catch'](function (rejection) {\n    return done(null, new Uint8Array());\n  }).then(function (plaintextArrayBuffer) {\n    return done(null, new Uint8Array(plaintextArrayBuffer));\n  });\n};\n\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint8Array} key the bytes of the decryption key\n * @param {Uint32Array} iv the initialization vector (IV) to\n * use for the first round of CBC.\n * @return {Promise} that resolves with a Uint8Array the decrypted bytes\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\nvar decryptWithDecrypter = function decryptWithDecrypter(encrypted, key, iv, done) {\n  return new Decrypter(encrypted, key, iv, done);\n};\n\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n * Chooses webcrypto or JS implementation where available.\n *\n * @param {Uint8Array} encrypted: the encrypted bytes\n * @param {Uint8Array} key: the bytes of the decryption key\n * @param {Uint32Array} iv: the initialization vector (IV) to\n * use for the first round of CBC.\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\nvar decrypt = function decrypt(encrypted, key, iv, done) {\n  var decryptionMethod = getWebCrypto() ? decryptWithWebCrypto : decryptWithDecrypter;\n\n  return decryptionMethod(encrypted, key, iv, done);\n};\n\nexports.decrypt = decrypt;\nexports['default'] = decrypt;\n},{\"./aes\":1,\"./async-stream\":2,\"global/window\":5,\"pkcs7\":7}],4:[function(require,module,exports){\n/**\n * @file stream.js\n */\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Stream = (function () {\n  function Stream() {\n    _classCallCheck(this, Stream);\n\n    this.listeners = {};\n  }\n\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {String} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n  _createClass(Stream, [{\n    key: 'on',\n    value: function on(type, listener) {\n      if (!this.listeners[type]) {\n        this.listeners[type] = [];\n      }\n      this.listeners[type].push(listener);\n    }\n\n    /**\n     * Remove a listener for a specified event type.\n     *\n     * @param {String} type the event name\n     * @param {Function} listener  a function previously registered for this\n     * type of event through `on`\n     * @return {Boolean} if we could turn it off or not\n     */\n  }, {\n    key: 'off',\n    value: function off(type, listener) {\n      var index = undefined;\n\n      if (!this.listeners[type]) {\n        return false;\n      }\n      index = this.listeners[type].indexOf(listener);\n      this.listeners[type].splice(index, 1);\n      return index > -1;\n    }\n\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     *\n     * @param {String} type the event name\n     */\n  }, {\n    key: 'trigger',\n    value: function trigger(type) {\n      var callbacks = undefined;\n      var i = undefined;\n      var length = undefined;\n      var args = undefined;\n\n      callbacks = this.listeners[type];\n      if (!callbacks) {\n        return;\n      }\n      // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n      if (arguments.length === 2) {\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = Array.prototype.slice.call(arguments, 1);\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    }\n\n    /**\n     * Destroys the stream and cleans up.\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.listeners = {};\n    }\n\n    /**\n     * Forwards all `data` events on this stream to the destination stream. The\n     * destination stream should provide a method `push` to receive the data\n     * events as they arrive.\n     *\n     * @param {Stream} destination the stream that will receive all `data` events\n     * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n     */\n  }, {\n    key: 'pipe',\n    value: function pipe(destination) {\n      this.on('data', function (data) {\n        destination.push(data);\n      });\n    }\n  }]);\n\n  return Stream;\n})();\n\nexports['default'] = Stream;\nmodule.exports = exports['default'];\n},{}],5:[function(require,module,exports){\n(function (global){\nif (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],6:[function(require,module,exports){\n/*\n * pkcs7.pad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\nvar PADDING;\n\n/**\n * Returns a new Uint8Array that is padded with PKCS#7 padding.\n * @param plaintext {Uint8Array} the input bytes before encryption\n * @return {Uint8Array} the padded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\nmodule.exports = function pad(plaintext) {\n  var padding = PADDING[(plaintext.byteLength % 16) || 0],\n      result = new Uint8Array(plaintext.byteLength + padding.length);\n  result.set(plaintext);\n  result.set(padding, plaintext.byteLength);\n  return result;\n};\n\n// pre-define the padding values\nPADDING = [\n  [16, 16, 16, 16,\n   16, 16, 16, 16,\n   16, 16, 16, 16,\n   16, 16, 16, 16],\n\n  [15, 15, 15, 15,\n   15, 15, 15, 15,\n   15, 15, 15, 15,\n   15, 15, 15],\n\n  [14, 14, 14, 14,\n   14, 14, 14, 14,\n   14, 14, 14, 14,\n   14, 14],\n\n  [13, 13, 13, 13,\n   13, 13, 13, 13,\n   13, 13, 13, 13,\n   13],\n\n  [12, 12, 12, 12,\n   12, 12, 12, 12,\n   12, 12, 12, 12],\n\n  [11, 11, 11, 11,\n   11, 11, 11, 11,\n   11, 11, 11],\n\n  [10, 10, 10, 10,\n   10, 10, 10, 10,\n   10, 10],\n\n  [9, 9, 9, 9,\n   9, 9, 9, 9,\n   9],\n\n  [8, 8, 8, 8,\n   8, 8, 8, 8],\n\n  [7, 7, 7, 7,\n   7, 7, 7],\n\n  [6, 6, 6, 6,\n   6, 6],\n\n  [5, 5, 5, 5,\n   5],\n\n  [4, 4, 4, 4],\n\n  [3, 3, 3],\n\n  [2, 2],\n\n  [1]\n];\n\n},{}],7:[function(require,module,exports){\n/*\n * pkcs7\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\nexports.pad = require('./pad.js');\nexports.unpad = require('./unpad.js');\n\n},{\"./pad.js\":6,\"./unpad.js\":8}],8:[function(require,module,exports){\n/*\n * pkcs7.unpad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\n/**\n * Returns the subarray of a Uint8Array without PKCS#7 padding.\n * @param padded {Uint8Array} unencrypted bytes that have been padded\n * @return {Uint8Array} the unpadded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\nmodule.exports = function unpad(padded) {\n  return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1]);\n};\n\n},{}],9:[function(require,module,exports){\n/**\n * @file index.js\n *\n * Index module to easily import the primary components of AES-128\n * decryption. Like this:\n *\n * ```js\n * import {Decrypter, decrypt, AsyncStream} from 'aes-decrypter';\n * ```\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _decrypter = require('./decrypter');\n\nvar _asyncStream = require('./async-stream');\n\nvar _asyncStream2 = _interopRequireDefault(_asyncStream);\n\nexports['default'] = {\n  decrypt: _decrypter.decrypt,\n  Decrypter: _decrypter.Decrypter,\n  AsyncStream: _asyncStream2['default']\n};\nmodule.exports = exports['default'];\n},{\"./async-stream\":2,\"./decrypter\":3}]},{},[9])(9)\n});"],"sourceRoot":""}